---
title: "The tilt indicators"
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

This article introduces the tilt indicators. First we introduce the tilt
indicators in general, then explain each indicator's details and show the code
you can use to calculate it.

We'll use general purpose tools from the dplyr package, and the experimental [tiltIndicator](https://2degreesinvesting.github.io/tiltIndicator/index.html) package.

```{r setup}
library(dplyr, warn.conflicts = FALSE)
library(tiltIndicator)
```

The tiltIndicator package comes with a number of datasets, which we'll use in the examples below.

```{r echo=FALSE}
datasets <- data(package = "tiltIndicator")[["results"]][, "Item"]
setNames(lapply(datasets, get), datasets)
```

## General introduction

<!-- WARNING: Do not write here. Instead write in the `child` file -->

```{r child=extdata_path("child/intro-general.Rmd")}
```

## XCTR: ICTR & PCTR

The acronym XCTR reflects that both ICTR and PCTR are calculated in exactly the
same way. The difference is not the process but the kind of `co2` data: either
comes from inputs or products.

### Input carbon transition risk (ICTR)

<!-- WARNING: Do not write here. Instead write in the `child` file -->

```{r child=extdata_path("child/intro-ictr.Rmd")}
```

### Product carbon transition risk (PCTR)

<!-- WARNING: Do not write here. Instead write in the `child` file -->

```{r child=extdata_path("child/intro-pctr.Rmd")}
```

### Example

Use `xctr*()` to calculate both ICTR and PCTR. Their difference is in the `co2`
dataset.

```{r}
companies <- ictr_companies

# ICTR
inputs <- ictr_inputs

companies |>
  xctr_at_product_level(co2 = inputs)

companies |>
  xctr_at_product_level(co2 = inputs) |>
  xctr_at_company_level()

# Same
companies |> xctr(co2 = inputs)

# PCTR
products <- pctr_ecoinvent_co2

companies |>
  xctr_at_product_level(co2 = products)

companies |>
  xctr_at_product_level(co2 = products) |>
  xctr_at_company_level()

# Same
companies |> xctr(co2 = products)
```
