---
title: "The tilt indicators"
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

This article helps you get started with the tiltIndicator package. Currently it 
supports two families of indicators: XCTR and XSTR.
In the XCTR family, you have two indicators: Input Carbon Transition Risk (ICTR) 
and Product Carbon Transition Risk (PCTR). They are both calculated in exactly the 
same way. The difference is not the process but the kind of `co2` data: either 
comes from inputs or products.

In the "sector" family, you have two indicators: "Sector profile" and "sector
profile upstream". They are both calculated in the same way, but "sector profile
upstream" takes `inputs` data as an additional argument, since it focuses on the
upstream products.

You can find the main functions of the families
[here](https://2degreesinvesting.github.io/tiltIndicator/reference/index.html#main-functions-and-datasets).

We'll use general purpose tools from the dplyr package, and the experimental
[tiltIndicator](https://2degreesinvesting.github.io/tiltIndicator/index.html)
[tiltToyData](https://2degreesinvesting.github.io/tiltIndicator/index.html)
packages.

```{r setup}
library(dplyr, warn.conflicts = FALSE)
library(tiltIndicator)
library(tiltToyData)
```

## Input carbon transition risk (ICTR)

<!-- WARNING: Do not write here. Instead write in the `child` file -->

```{r child=extdata_path("child/intro-ictr.Rmd")}
```

## Product carbon transition risk (PCTR)

<!-- WARNING: Do not write here. Instead write in the `child` file -->

```{r child=extdata_path("child/intro-pctr.Rmd")}
```

## Thresholds

<!-- WARNING: Do not write here. Instead write in the `child` file -->

```{r child=extdata_path("child/thresholds.Rmd")}
```

## Example

Use `xctr*()` to calculate both ICTR and PCTR. Their difference is in the `co2`
dataset. Here we'll use example datasets that come with the tiltIndicator
package: `companies`, `inputs`, and `products`.

```{r}
companies

products

both <- emissions_profile(companies, products)
both

both |> unnest_product()

both |> unnest_company()
```

```{r}
upstream_products <- inputs

both <- emissions_profile_upstream(companies, upstream_products)
both

both |> unnest_product()

both |> unnest_company()
```

